# Al Prompt Optimizer

一个轻量、纯前端的提示词与指令优化工作台。开箱即用，无需后端。

## 近期更新
- 优化思路卡片新增复制按钮（主模块与提示词帮写均支持）
- 输入与输出区域统一固定高度，默认为 28rem，内容溢出滚动不拉伸
- 使用统计文案更新为“统计数据”，当前为本设备累计；后端接入后可汇总所有 IP 点击
- 修复模块切换时报错（Cannot set properties of null），为设置面板与预设编辑赋值增加空值守护

## 功能概览
- 提示词优化：结构化重写、质量提升
- 指令优化：按“目标导向、步骤/约束、上下文、专业表达”四项进行优化
- 提示词帮写：将原始输入快速生成可复用的提示词草稿
- 图像反推：从图片生成描述提示词（需使用支持多模态的模型）
- 指令反推：对比两张图片生成转换指令（同样需要多模态支持）
- 预设管理：新建/编辑/删除/导入/导出，活动预设一键切换
- 交互优化：删除预设使用非阻塞确认弹窗，支持 Enter/ESC

## 快速开始
1. 本地运行
   ```bash
   python3 -m http.server 8081
   # 打开浏览器访问 http://localhost:8081/
   ```
2. 选择“全局配置”，填写：
   - API 密钥
   - 接口地址（支持多平台，示例：DeepSeek、OpenAI、Google、SiliconFlow）
   - 模型名称（根据接口自动刷新可选模型列表）
3. 返回工作台，开始使用相应模块

## 配置说明
- 接口与模型：
  - 根据 baseURL 自动刷新模型下拉选项（支持 Google、SiliconFlow、OpenAI、DeepSeek 等）
  - 若当前模型不在列表中，按接口类型选择合理默认项
- 已去除项：
  - CORS 代理：浏览器直接请求目标 API，不再拼接代理
  - 视觉模型（CV）密钥：不再需要 AK/SK 配置
- 多模态支持：
  - 图像相关功能依赖所选模型的多模态能力（例如支持 Vision/VL）
  - 若模型不支持图片，请使用文本相关模块

## 使用统计
- UI 显示“统计数据”，默认基于浏览器 localStorage 记录本设备累计次数
- 如需“所有 IP 点击的综合”统计，请接入后端聚合接口；前端可在接口可用时改为远程读写，并在离线时回退到本地存储

## 预设管理
- 位置：右上角“管理” → 预设管理
- 类型：提示词优化、指令优化、图像反推、指令反推、提示词帮写
- 操作：
  - 新建/编辑：在右侧编辑器填写名称与系统提示词内容
  - 删除：卡片右侧垃圾桶 → 弹出确认 → 确认后删除
  - 导入/导出：支持 JSON 文件
- 空状态：
  - 默认无任何预设
  - 可根据需要自行创建或导入

## 常见问题
- 服务不可用
  - 本地服务需运行在 8081 端口；如端口被占用，切换到 8080
  - 浏览器跨域由目标 API 决定，已移除 CORS 代理；如遇跨域，请改用同源后端转发或允许的 API 域名
- 删除预设没有反应
  - 确认弹窗层级已提升（z-index），在设置弹窗之上显示
  - 按 Enter 确认，Esc 取消
- 图标未正常渲染或外链报错
  - 外网依赖失败（如 unpkg）不影响核心功能；前端已在交互后调用图标刷新
- 看不到“优化技巧”
  - 切换到“指令优化”后，右侧卡片显示四条使用建议：目标导向、步骤/约束、上下文、专业表达

## 开发
- 代码位置：单页应用 [index.html](index.html)
- 技术栈：纯 HTML/CSS/JS，无依赖构建工具
- 修改后通过本地服务预览

## 协作与同步
- 仓库地址：https://github.com/zhiwendesign/PE
- 建议 workflow：
  - 在本地修改并验证
  - 使用 `git add -A && git commit -m "<message>"`
  - `git pull --rebase origin main && git push -u origin main`

## 许可证
- 未显式声明许可证；如需开源许可，请在仓库根目录添加 LICENSE 文件
